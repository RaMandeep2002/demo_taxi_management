(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{4208:(e,t,n)=>{Promise.resolve().then(n.bind(n,4459))},4459:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5155),a=n(9443),s=n(3391),l=n(2115),d=n(3499),x=n(2079),c=n(8490);function i(){let e=(0,s.wA)(),{data:t}=(0,s.d4)(e=>e.admin),{bookings:n,loading:i,error:o}=(0,s.d4)(e=>e.fetchBookingHistory);return(0,l.useEffect)(()=>{e((0,d.h)()),e((0,c.mx)())},[e]),(0,r.jsx)(a.A,{children:(0,r.jsxs)("div",{className:"max-w-full mx-auto p-8",children:[t&&(0,r.jsxs)("h1",{className:"text-3xl font-bold mb-6 text-[#F5EF1B]",children:["Welcome Admin, ",t.name,", ",t.email]}),(0,r.jsx)("h1",{className:"font-bold p-4 text-2xl text-[#F5EF1B]",children:"Gross Earning"}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"border border-[#F5EF1B] rounded-lg overflow-hidden",children:(0,r.jsxs)(x.XI,{children:[(0,r.jsx)(x.A0,{children:(0,r.jsxs)(x.Hj,{className:"text-center border border-[#F5EF1B] ",children:[(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg ",children:"Booking ID"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Customer Name"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Booking Date"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Assign Driver"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Total Fare"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Pickup"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Drop Off"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Payment Status"}),(0,r.jsx)(x.nd,{className:"w-[100px] h-[50px] text-center text-[#F5EF1B] text-lg",children:"Status"})]})}),(0,r.jsx)(x.BF,{children:i?(0,r.jsx)(x.Hj,{children:(0,r.jsx)(x.nA,{colSpan:6,className:"text-center",children:"Loading..."})}):o?(0,r.jsx)(x.Hj,{children:(0,r.jsxs)(x.nA,{colSpan:6,className:"text-center text-red-500",children:["Error: ",o]})}):n.map(e=>{var t,n;return(0,r.jsxs)(x.Hj,{className:"text-center border border-[#F5EF1B]",children:[(0,r.jsx)(x.nA,{className:"font-medium w-[100px] h-[50px] text-center text-white text-lg ",children:e.bookingId}),(0,r.jsx)(x.nA,{className:"font-medium w-[100px] h-[50px] text-center text-white text-lg",children:e.customerName}),(0,r.jsx)(x.nA,{className:"text-center w-[100px] h-[50px]  text-white text-lg",children:e.pickupDate}),(0,r.jsx)(x.nA,{className:"text-center w-[100px] h-[50px]  text-white text-lg",children:(null===(t=e.driver)||void 0===t?void 0:t.drivername)?null===(n=e.driver)||void 0===n?void 0:n.drivername:"No driver assign"}),(0,r.jsx)(x.nA,{className:"text-center w-[100px] h-[50px]  text-white text-lg",children:e.totalFare}),(0,r.jsx)(x.nA,{className:"text-center w-[100px] h-[50px]  text-white text-lg",children:"".concat(e.pickup.address)}),(0,r.jsx)(x.nA,{className:"text-center w-[100px] h-[50px]  text-white text-lg",children:"".concat(e.dropOff.address)}),(0,r.jsx)(x.nA,{className:"text-center w-[100px] h-[50px]  text-white text-lg",children:e.paymentStatus}),(0,r.jsxs)(x.nA,{className:"text-center text-white",children:[" ",(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("completed"===e.status?"bg-green-100 text-green-800":"accepted"===e.status?"bg-yellow-100 text-yellow-800":"ongoing"===e.status?"bg-blue-100 text-blue-800":"pending"===e.status?"bg-gray-100 text-gray-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-300 text-gray-600"),children:e.status})]})]},e.bookingId)})})]})})})]})})}},3499:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,h:()=>s});var r=n(8943),a=n(2651);let s=(0,r.zD)("admin/fetchAdminInfo",async(e,t)=>{let{rejectWithValue:n}=t;try{var r;let e=localStorage.getItem("token");if(!e)return n("No authentication token found");let t=await a.A.get("http://localhost:5000/admin/adminInfo",{headers:{Authorization:"Bearer ".concat(e)}});if(!(null===(r=t.data)||void 0===r?void 0:r.admin))throw Error("Invalid response structure");return t.data.admin}catch(e){return console.log(e),n("An unexpected error occurred")||"Failed to fetch admin info"}}),l=(0,r.Z0)({name:"admin",initialState:{data:null,isLoading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.isLoading=!1,e.data=t.payload}).addCase(s.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}).reducer},8490:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l,mx:()=>s});var r=n(8943),a=n(2651);let s=(0,r.zD)("booking/fetchHistory",async(e,t)=>{let{rejectWithValue:n}=t;try{let e=await a.A.get("http://localhost:5000/customer/bookingHistory");return console.log("Data: - ",e.data.bookings),e.data.bookings}catch(e){return console.error(e),n("Failed to fetch bookings")}}),l=(0,r.Z0)({name:"booking",initialState:{bookings:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.bookings=t.payload,e.loading=!1}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Something went wrong"})}}).reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[559,819,181,197,441,517,358],()=>t(4208)),_N_E=e.O()}]);